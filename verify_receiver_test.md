# 📡 GDL-90接收器官方示例验证

## 🎯 测试目的

使用官方GDL-90规范中的Traffic Report示例来验证我们的接收器解码准确性。

## 📊 官方示例数据

**Salem, OR上空的目标飞机:**
- **ICAO地址**: 52642511₈ (八进制) = 0xAB4549 (十六进制)
- **纬度**: 44.90708° (North)
- **经度**: -122.99488° (West)  
- **高度**: 5,000 feet
- **地速**: 123 knots
- **航向**: 45°
- **垂直速度**: 64 FPM (climb)
- **呼号**: N825V
- **发射器类别**: Light (1)
- **导航质量**: NIC=10, NACp=9

## 🚀 验证步骤

### 步骤1: 启动接收器
```bash
# 在第一个终端窗口运行
python gdl90_receiver.py --traffic-only
```

### 步骤2: 发送官方示例
```bash
# 在第二个终端窗口运行
python test_official_example.py
```

### 步骤3: 验证输出

如果接收器工作正确，你应该看到：

```
[HH:MM:SS.mmm] 📨 从 127.0.0.1:xxxxx
📋 消息类型: Traffic Report
🏷️  ICAO地址: 0xAB4549
🌍 位置: LAT=44.907080°, LON=-122.994880°
📏 高度: 5000ft
🚀 地速: 123 kts
⬆️  垂直速度: 64 fpm
🧭 航向: 45.0°
📻 呼号: 'N825V   '
✈️  发射器类别: 1
📡 导航完整性: 10, 精度: 9
```

## ✅ 验证标准

接收器解码**完全正确**如果所有以下数据匹配:

| 字段 | 期望值 | 验证 |
|------|--------|------|
| ICAO地址 | 0xAB4549 | ✅ |
| 纬度 | 44.907080° | ✅ |
| 经度 | -122.994880° | ✅ |
| 高度 | 5000ft | ✅ |
| 地速 | 123 kts | ✅ |
| 垂直速度 | 64 fpm | ✅ |
| 航向 | 45.0° | ✅ |
| 呼号 | 'N825V   ' | ✅ |
| 发射器类别 | 1 | ✅ |
| NIC | 10 | ✅ |
| NACp | 9 | ✅ |

## 🔧 其他测试选项

### 仅分析数据（不发送）
```bash
python test_official_example.py --analyze
```

### 指定不同的接收器地址/端口
```bash
python test_official_example.py --ip 192.168.1.100 --port 5000
```

## 🔍 原始数据查看

官方示例的完整十六进制数据：
```
7E 14 00 AB 45 49 1F EF 15 A8 89 78 0F 09 A9 07 B0 01 20 01 4E 38 32 35 56 20 20 20 00 [CRC] 7E
```

## 🐛 故障排除

### 问题：接收不到消息
- 确认接收器正在监听正确端口 (默认4000)
- 检查防火墙设置
- 确保两个程序都在运行

### 问题：数据不匹配
- 检查CRC是否正确
- 验证消息转义是否正确
- 查看原始十六进制数据

### 问题：解码错误
- 查看接收器的错误输出
- 检查消息格式是否符合GDL-90标准
- 验证字节序和位字段解析

## 🏆 成功标准

如果接收器能够**完全准确**地解码官方示例，显示所有正确的数值，那么说明：

1. ✅ **CRC校验**: 正确实现
2. ✅ **消息转义**: 正确处理
3. ✅ **字节序解析**: 大端序/小端序正确
4. ✅ **坐标转换**: 24位坐标解码正确
5. ✅ **速度解析**: 12位速度字段正确
6. ✅ **字符串解码**: ASCII呼号正确
7. ✅ **位字段解析**: 状态和导航质量字段正确

通过这个测试，你可以确信接收器能够正确解码任何符合标准的GDL-90 Traffic Report消息！
